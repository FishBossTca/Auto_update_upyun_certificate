# update_upyun_certificate
这个脚本是用来自动更新又拍云证书，以绕过又拍云自动续签证书的需要高昂的价格

# 实现原理
通过登入又拍云的账户获取到cookie，来进行一些列
1. 获取证书列表
2. 上传新证书
3. 进行证书迁移
4. 删除旧证书

等操作，来实现自动替换证书的操作
# 前提条件
1. 需要安装requests的pip包
2. 本地已经存在新的证书和密钥
3. 又拍云已经存在旧证书
# 使用说明
## 1、配置基本信息
编辑Auto_update_upyun_certificate.py文件，将配置信息栏填入相应的信息

- USERNAME = "你的账户"
- PASSWORD = "你的密码"
- DOMAIN   = "证书域名"
- KEY_PATH = "密钥路经"
- CERT_PATH= "证书路经"

## 2、运行python脚本
```python Auto_update_upyun_certificate.py```

## 3、运行结果
```
➤ 登录中...
✔ 登录成功
✔ 旧证书 ID: 13dcada8c7afa11170a4efc22629842a
➤ 上传新证书...
✔ 上传成功，新证书 ID: 8ec243c207f4640c4d71262f44a23a04
➤ 迁移证书...
✔ 迁移成功
➤ 等待 5 秒后删除旧证书...
✔ 旧证书删除成功
```
这里存在一个等待5s的延迟删除是因为证书迁移是需要时间的，不会马上就可以完全全部证书的迁移工作

如果新旧证书是同一个证书将不会进行替换

```⚠️ 新旧证书 ID 相同，跳过迁移与删除```
# 拓展使用
可以搭配lucky的SSL证书自动续签来实现续签后触发更新脚本
或者使用计划任务来时实现定时替换证书